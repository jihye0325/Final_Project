<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
			    xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta id="_csrf" name="_csrf" th:content="${_csrf.token}"/>
	<!-- default header name is X-CSRF-TOKEN -->
	<meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}"/>

    <title>상품 상세 페이지</title>
    <link rel="stylesheet" th:href="@{https://unpkg.com/swiper/swiper-bundle.min.css}">
    <link rel="stylesheet" th:href="@{/css/product_style.css}">
    <style>
    	#nav-wrapper{margin-bottom:0 !important;}
    </style>
    <script th:inline="javascript">
    	// pNo전달위해 
    	let pNoNumber = Number('[[${pNo}]]');
    	
    	let loginUno = Number('[[${modelMap.loginUno}]]');
    	let imgSet = [];
    	
    	
    </script>
    <script th:src="@{/js/jquery-3.6.0.min.js}"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script th:src="@{/js/product_common.js}"></script> <!-- 상품 페이지 공통js -->
    <script th:src="@{/js/product.js}" th:inline="javascript"></script>	      <!-- 상품 상세js -->
    <script th:src="@{/js/product_qna.js}"></script>	  <!-- 상품 상세 상품문의 js -->
    <script th:src="@{/js/product_review.js}"></script>	  <!-- 상품 상세 상품리뷰 js -->
    <script>
    	$(function(){
		    let pMsg = '[[${pMsg}]]';
			if(pMsg != ''){
				alertPopup(pMsg);
			}
    	})
    </script>
</head>
<body>
    <div id="wrap">
        <div th:replace="common/header.html"></div>
       <section id="product_view">
            <div class="container">
                <div class="product_view">
                    <div class="view_main_wrap">
                        <!-- 상품 top -->
                        <div class="view_top_wrap">
                            <div class="slide_wrap">
                                <div class="img">
                                    <img th:src="@{${modelMap.info.imageList[0].route} + ${modelMap.info.imageList[0].imgrName}}" alt="">
                                </div>
                                <div class="img_list">
                                    <a href="javascript:;" th:each="image : ${modelMap.info.imageList}" th:classappend="${imageStat.first} ? 'on'">
                                        <img th:src="${image.route} + ${image.imgrName}" alt="">
                                    </a>
                                </div>
                            </div>
                            
                            <div class="view_txt_wrap">
                                <p class="product_title" th:text="${modelMap.info.pName}">긴팔 셔츠/체크/스트라이프/캐주얼/오버핏/빅 사이즈</p>
                                
                                <th:block sec:authorize="isAuthenticated()">
						       		<a href="javascript:;" th:onclick="|javascript:wishListHandler(${modelMap.loginUno} , ${modelMap.info.pNo})|" class="btn_wish" th:classappend="${modelMap.info.wishLike == 1} ? 'on'"></a>
						       </th:block>
                                <th:block sec:authorize="isAnonymous()">
						       		 <a href="javascript:;" th:onclick="|javascript:wishListHandler(${modelMap.loginUno} , ${modelMap.info.pNo})|" class="btn_wish"></a>
						       </th:block>
                               
                                
                                <p class="sale_price" th:text="|${#numbers.formatInteger(modelMap.info.pPrice, 3, 'COMMA')}원|" th:if="${modelMap.info.pDiscount > 0}">25,000원</p>
                                <div class="price_wrap" >
                                    <p class="price" th:with="perwon = ${modelMap.info.pPrice - (modelMap.info.pPrice * (modelMap.info.pDiscount / 100.0))}" >
                                        <span th:text="${#numbers.formatInteger(perwon, 3, 'COMMA')}">17,000</span>원
                                    </p>
                                    <p class="price_per" th:if="${modelMap.info.pDiscount > 0}">
                                        <span th:text="${modelMap.info.pDiscount}">32</span>%
                                    </p>
                                </div>
                                <div class="view_status">
                                    <strong>택배</strong>
                                    <p class="post_price">2,500원 <span>(총 구매금액 8만원 이상 무료배송)</span></p>
                                    <p class="post_day">지금 주문시 <span>금일 배송</span> 출발!</p>
                                    <p class="tip">주문 시, 발송일자를 확인해주세요</p>
                                </div>
                            </div>
                        </div>

                        <div class="view_tab_wrap">
                            <div class="tab_box">
                                <a href="javascript:;" class="on">상품상세</a>
                                <a href="javascript:;">상품리뷰 (<span>10</span>)</a>
                                <a href="javascript:;">상품문의 (<span>10</span>)</a>
                                <a href="javascript:;">기본정보</a>
                            </div>
                        </div>
                        
                        <div class="view_detail_wrap">
                            <div class="detail_wrap">
                                <img src="/images/detail.png" alt="">
                            </div>
                        </div>

                        <div class="view_item_wrap" id="item_review">
                            <div class="head">
                                <h3 class="title">상품리뷰</h3>
                            </div>
                            <div class="review_wrap" id="review_board">
                            	<div class="review_list" th:if="${reviewList != null and #lists.size(reviewList) > 0}" th:each="review,index : ${reviewList}" >
                            		<input type="hidden" name="rNoHidden" th:value="${review.rNo}"/>
                                    <p class="review_date">2021.10.21</p>
                                    <th:block sec:authorize="isAuthenticated()">
							       		<a href="javascript:;" th:onclick="|javascript:reviewLike(${review.rNo}, ${review.loginUno}, ${index.index});|" class="review_like" th:classappend="${review.likeCount} == 1 ? 'on'">좋아요</a>
							       </th:block>
                                    
                                    <p class="review_id">
                                    	<span th:text="${#strings.substring(review.member.id, 0, #strings.length(review.member.id) - 4) + '****'}">id1234****</span>
	                                    <span class="sub" th:text="|${review.member.gender}성-|">남성</span>
	                                    <th:block th:switch="${review.openSize}">
	                                    	<span class="sub" th:case="Y" th:text="|${review.member.height}cm, ${review.member.weight}kg|">(173cm, 76kg)</span>
	                                    	<span class="sub" th:case="N">비공개</span>
	                                    </th:block> 
                                    </p>
                                    <ul class="review_star_wrap">
                                    	<th:block th:each="score, s : ${#numbers.sequence(1, 5)}">
                                    		<li class="reive_star on" th:if="${s.current <= review.score}"></li>
                                    		<li class="reive_star" th:unless="${s.current <= review.score}"></li>
                                    	</th:block>
                                        
                                    </ul>
                                    <p class="review_option" th:text="|${review.pColor} / ${review.pSize}|">캐쥬얼 긴팔 셔츠 / 화이트 / L</p>

                                   <ul class="review_img_wrap">
                                       <li class="review_img">
                                            <a href="javascript:;" th:onclick="|javascript:reviewView();|">
                                                <img src="data:image/png;base64,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">
                                            </a>
                                        </li>
                                    </ul>

                                    <div class="review_txt_wrap"> 
                                     <div class="review_txt" th:utext="${review.rContent}">
                                        마음에들어요<br>
                                        마음에들어요!
                                      </div>
                                    </div>
                                </div>
                                
                                <script>
                                	$(function(){
                                		// 리뷰이미지 가공하기
                            			let rList = $("#review_board .review_list");
                                		let rListSize = rList.length;
                                		
                                		$(".review_img_wrap li").remove();
                                		
                                		imgSet = [];
                                		
                                		for(let i = 0; i < rListSize; i++){
                                			let temp = [];
                                			let rImg = rList.eq(i).find(".review_txt img");
                                			let rImgSize = rImg.length;
                                			let rNo = rList.eq(i).find('input[name=rNoHidden]').val();
                                			
                                			for(let j = 0; j < rImgSize; j++){
                                			let imgSrc = rImg.eq(j).attr("src");
	                                			temp.push(imgSrc);
	                                			
	                                			let html = '<li class="review_img"><a href="javascript:;" onclick="javascript:reviewView('+rNo+');">'; 
	                                			
                                                   html += '<img src="'+imgSrc+'">';
                                            	   html += '</a>';
                                        		   html += '</li>';
                                        		   rList.eq(i).find(".review_img_wrap").append(html);
                                			}
                                			
                                			if(temp.length > 0){
	                                			imgSet.push(temp);
                                			}
                                		}
                                		
                                		rList.find('.review_txt img').remove(); 
                                		
                                	});
                                
                                </script>
                                
                                <!-- nodata -->
                                <div class="nodata" th:unless="${reviewList != null and #lists.size(reviewList) > 0}"></div>
                            </div>
                            
                                <!-- 페이징 -->
                            <div class="pagaing_wrap">
                                <ul class="pagaing_left">
                                    <li class="allPrev hide"><a href="javascript:;"></a></li>
                                    <li class="prev hide"><a href="javascript:;"></a></li>
                                </ul>
                                
                                <ul class="pagaing_num">
                                   
                                </ul>
        
                                <ul class="pagaing_right">
                                    <li class="next"><a href="javascript:;"></a></li>
                                    <li class="allNext"><a href="javascript:;"></a></li>
                                </ul>
                            </div>

                        </div>
						
                        <div class="view_item_wrap" id="item_qna">
                        
                            <div class="head">
                            	
                                <h3 class="title">상품문의</h3>
                                <div class="view_qna_top">
                                    <div class="checkbox">
                                        <input type="checkbox" name="qnaSecret" id="qnaSecret">
                                        <label for="qnaSecret">비밀글 제외</label>
                                    </div>
                                    <div class="select">
                                        <select name="qnaType" id="">
                                        	<option value="INQUIRY_CODE_ALL">상품 전체</option>
		                                    <option value="INQUIRY_CODE1">교환</option>
		                                    <option value="INQUIRY_CODE2">반품</option>
		                                    <option value="INQUIRY_CODE3">배송</option>
		                                    <option value="INQUIRY_CODE4">변경</option>
		                                    <option value="INQUIRY_CODE5">상품</option>
		                                    <option value="INQUIRY_CODE6">취소</option>
		                                </select>
                                    </div>
                                    
                                    <th:block sec:authorize="isAuthenticated()">
							       		<a href="javascript:popOpen('productQna', 'insert');" class="btn_qna">상품 문의하기</a>
							       </th:block>
                                </div>
                            </div>
	
                            <div class="view_qna_wrap" id="view_qna">
                                <ul class="qna_list" th:if="${selectList != null and #lists.size(selectList) > 0}" >
	                                    <li class="line" th:each="list: ${selectList}" >
	                                        <div class="line_box">
	                                            <p class="line_type" th:text="${list.piCateName}">문의 카테고리 이름</p>
	                                            <th:block th:switch="${list.piqSecret}">
	                                            	<p class="line_title" th:case="Y" th:classappend="${list.userNo != list.loginUno} ? 'secret'">
		                                            	<a href="javascript:;" th:if="${list.userNo != list.loginUno}">비밀글 입니다.</a>
		                                            	<a href="javascript:;" th:unless="${list.userNo != list.loginUno}" th:text="${list.piqTitle}"></a>
		                                            </p>
		                                            <p class="line_title" th:case="N">
		                                            	<a href="javascript:;" th:text="${list.piqTitle}"></a>
		                                            </p>
	                                            </th:block>
	                                            <p class="line_id" th:text="${#strings.substring(list.id, 0, #strings.length(list.id) - 4) + '****'}">
	                                                id1234****
	                                            </p>
	                                            <p class="line_date" th:text="${list.piqCreateDate}">
	                                                2021.10.20
	                                            </p>
	                                            
	                                            <th:block th:if="${list.productQnaA != null}">
	                                            	 <p class="line_status complete">답변</p>
	                                            </th:block>
	                                            <th:block th:unless="${list.productQnaA != null}">
	                                            	 <p class="line_status">대기
		                                            </p>
	                                            </th:block>
	                                        </div>
	                                        <div class="line_qna_box">
	                                            <div class="line_q_box">
	                                                <div class="text_box">
	                                                    <p th:text="${list.piqContent}">상품에 문제가있습니다.</p>
	                                                </div>
	                                                
	                                                <ul class="btn_box">
	                                                    <li th:if="${list.userNo == list.loginUno}">
	                                                        <a href="javascript:;" th:onclick="|javascript:qnaModifyView(${list.piqCode})|">수정</a>
	                                                    </li>
	                                                    <li th:if="${list.userNo == list.loginUno}">
	                                                    	<a href="javascript:;" th:onclick="|javascript:qnaDelete(${list.piqCode})|">삭제</a>
	                                                    </li>
	                                                </ul>
	                                            </div>
	                                            <div class="line_q_box">
	                                            <th:block th:if="${list.productQnaA != null}">
	                                            	<div class="text_box">
	                                               	    <p th:text="${list.productQnaA.piaContent}"></p>
	                                                </div>
	                                                
	                                                <p class="text_date" th:text="${list.productQnaA.piaCreateDate}"></p>
	                                            </th:block>
	                                            <th:block th:if="${list.productQnaA == null}">
	                                            	<div class="text_box">
	                                               	    <p>문의 답변 대기중입니다.</p>
	                                                </div>
	                                            </th:block>
	                                            </div>
	                                        </div>
	                                    </li>
                                </ul>
                                <div class="nodata" th:unless="${selectList != null and #lists.size(selectList) > 0}"></div>
                                
                            </div>
                            
                            <!-- 페이징 -->
                            <div class="pagaing_wrap">
                                <ul class="pagaing_left">
                                    <li class="allPrev hide"><a href="javascript:;"></a></li>
                                    <li class="prev hide"><a href="javascript:;"></a></li>
                                </ul>
                                <ul class="pagaing_num">
                                </ul>
        
                                <ul class="pagaing_right">
                                    <li class="next"><a href="javascript:;"></a></li>
                                    <li class="allNext"><a href="javascript:;"></a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="view_item_wrap" id="item_info">
                            <div class="head">
                                <h3 class="title">배송/교환/반품 정보</h3>
                            </div>

                            <div class="view_info_wrap">
                                <dl>
                                    <dt>배송</dt>
                                    <dd>배송기간은 주문일로부터 2일~5일(주말/공휴일 제외)이 소요됩니다.</dd>
                                    <dd>각 공급사마다 배송비가 차등 부과되며, 배송비 부과 기준에 따라 별도의 배송비가 책정될 수도 있습니다.</dd>
                                    <dd>직접수령은 불가합니다. 온라인 주문/배송만 가능합니다.</dd>
                                    <dd>묶음배송은 불가합니다. 각 주문건별로 별도로 배송됩니다.</dd>
                                    <dd>주문 후 상품준비기간(영업일 기준 1일~3일)동안 간혹 예기치 못한 재고부족으로 인한 품절 및 출고 지연이 발생될 수 있습니다.</dd>
                                </dl>

                                <dl>
                                    <dt>교환/반품/환불</dt>
                                    <dd>교환/반품 신청은 배송완료 후 7일 이내 가능합니다.</dd>
                                    <dd>변심반품/교환 제품의 하자나 불량이 아닌 변심건의 경우 왕복배송비(6,000원)를 고객부담으로 하며, 제품 및 포장 상태가 재판매 가능하여야 합니다.</dd>
                                    <dd>환불승인 후 영업일 기준 3~7일 이내 환불 및 취소여부 확인 가능합니다.</dd>
                                    <dd>상품 불량확정 시 배송비를 포함한 전액이 환불됩니다.</dd>
                                    <dd>상품가치가 훼손된 경우 교환/반품이 불가합니다. (제품포장 개봉 및 주문제작상품 / 밀봉포장상품 및 스티커부착 상품 / 텍 제거상품 / 식품 등)</dd>
                                    <dd>출고 이후 환불요청 시 상품 회수 후 처리됩니다.</dd>
                                    <dd>교환/환불에 대한 브랜드 개별기준이 있는 경우에는 해당 내용이 우선 적용 됩니다.</dd>
                                </dl>
                            </div>
                            
                        </div>
                    </div>
                    <div class="view_sub_wrap">
                        <div class="box_wrap">
	                        <form name="productFrm" th:action="@{/product/order}" method="post">
	                        	
	                        	<input type="hidden" name="userNo" th:value="${modelMap.loginUno}" >
	                        	<input type="hidden" name="pNo" th:value="${pNo}" >
	                        	<input type="hidden" name="sellerCode" th:value="${modelMap.info.sellerCode}" >
	                        	
		                            <div class="option_wrap">
	                                <select name="optionColor" id="optionColor" class="select" >
	                                    <option value="colorChoice">색상 선택</option>
	                                </select>
	                                <select name="optionSize" id="optionSize" class="select" disabled>
	                                    <option value="">옵션 선택</option>
	                                </select>
	                            </div>
	
	                            <div class="select_list_wrap">
	                                <!-- 상품 선택 옵션 들어갑니다. -->
	                            </div>
	
	                            <div class="list_total_wrap">
	                                <p class="title">총 <span>0</span>개 상품구매</p>
	                                <p class="price"><span>0</span>원</p>
	                            </div>
	
	                            <div class="list_btn_wrap">
	                                <button type="button" class="buy" onclick="productBuyHandler()">구매하기</button>
	                                <button type="button" class="cart" onclick="productCartHandler()">장바구니</button>
	                            </div>
	                        </form>
                        </div>
                    </div>
                </div>
            </div>
       </section>
       
       <div th:replace="common/footer.html"></div>
       
    </div>
    
    <!-- 팝업 영역 -->
    <!-- 상품문의 등록 or 수정(공용) S -->
    <div class="layout_wrap" id="productQna">
        <div class="dim"></div>
        <div class="layout_box">
            <div class="layout_head">
                <h3 class="title">상품문의 등록</h3>
                <a href="javascript:popClose('productQna');" class="pop_close"></a>
            </div>
            <div class="layout_body">
                <div class="layout_qna_wrap">
                	<input type="hidden" name="qnaType">
                    <dl>
                        <dt>공개 여부*</dt>
                        <dd>
                            <div class="select">
                                <select name="piqSecret" id="">
                                    <option value="N">공개</option>
                                    <option value="Y">비공개</option>
                                </select>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>문의 유형*</dt>
                        <dd>
                            <div class="select">
                                <select name="piCateCode" id="">
                                    <option value="INQUIRY_CODE1">교환</option>
                                    <option value="INQUIRY_CODE2">반품</option>
                                    <option value="INQUIRY_CODE3">배송</option>
                                    <option value="INQUIRY_CODE4">변경</option>
                                    <option value="INQUIRY_CODE5">상품</option>
                                    <option value="INQUIRY_CODE6">취소</option>
                                </select>
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>제목*</dt>
                        <dd>
                            <div class="input">
                                <input type="text" name="piqTitle">
                            </div>
                        </dd>
                    </dl>
                    <dl>
                        <dt>내용*</dt>
                        <dd>
                            <div class="textarea">
                                <textarea name="piqContent" id="" cols="30" rows="10"></textarea>
                            </div>
                        </dd>
                    </dl>
                </div>
                <div class="layout_btn_wrap">
                    <a href="javascript:;" class="active">등록하기</a>
                    <a href="javascript:;" class="active">수정하기</a>
                    <a href="javascript:;">취소하기</a>
                </div>
            </div>
        </div>
    </div>
    <!-- 상품문의 등록 or 수정(공용) E -->
    
    <!-- 상품 리뷰 상세 S -->
    <div class="layout_wrap" id="review_view">
        <div class="dim"></div>
        <div class="layout_box">
            <div class="layout_head">
                <h3 class="title">상품 리뷰 상세</h3>
                <a href="javascript:popClose('review_view');" class="pop_close"></a>
            </div>
            <div class="layout_body type02">
              <div class="layout_review">
                <div class="slide_wrap">

                    <div class="slide_page"></div>

                    <div class="swiper mySwiper">
                        <div class="swiper-wrapper">
                          	<!-- <div class="swiper-slide">
                                <img src="/images/slide_sample.png" alt="">
                            </div>
                            -->
                        </div>
                    </div>
                    
                </div>
                <div class="review_info_wrap">
                    <p class="review_id">
                    <span class="review_id_text">
                    	id1234****
                    </span> 
                    
                    <span class="info">남성-(173cm, 76kg)</span></p>
                    <p class="review_date">2021.10.21</p>
                    <div class="review_star">
                        <div class="star on"></div>
                        <div class="star on"></div>
                        <div class="star on"></div>
                        <div class="star"></div>
                        <div class="star"></div>
                    </div>
                    <p class="review_option">캐쥬얼 긴팔 셔츠 / 화이트 / L</p>
                    <div class="review_txt_box">
                        <p>가나다람ㄴ암낭망남ㄴ암ㅇ남ㅇ낭ㅁ난ㅇㅁ</p>
                        <p>가나다람ㄴ암낭망남ㄴ암ㅇ남ㅇ낭ㅁ난ㅇㅁ</p>
                    </div>

                </div>
              </div>
            </div>
        </div>
    </div>
    
    <script>

        $(function(){
        	// 상품 상세 이미지 이벤트
        	$(".slide_wrap .img_list a").mouseenter(function(){
        		$(".slide_wrap .img_list a").removeClass("on");
        		$(this).addClass("on");
        		
        		let imgAttr = $(this).find("img").attr("src");
        		
        		$(".slide_wrap .img img").attr("src", imgAttr);
        	});
        	
        	// 배송 날짜 계산
        	let postToday = new Date();
        	let weekday = postToday.getDay();
        	
        	let hours = postToday.getHours();
        	
        	let postTxt = "";
        	let dayType = "";
        	
        	if(0 <= hours && hours <= 15){
        		dayType = "(" + (postToday.getMonth() + 1)  + "/" + postToday.getDate() + ")";
        		postTxt = "금일" + dayType + " 배송";
        	} else{
        		postToday.setDate(postToday.getDate() + 1)
        		dayType = "(" + (postToday.getMonth() + 1)  + "/" + postToday.getDate() + ")";
        		postTxt = "익일" + dayType + "배송";
        	}
        	
        	if(weekday == 0){
        		postToday.setDate(postToday.getDate() + 2);
        		dayType = "(" + (postToday.getMonth() + 1)  + "/" + postToday.getDate() + ")";
        		postTxt = "월요일" + dayType + " 배송"
        	}else if(weekday == 6){
        		postToday.setDate(postToday.getDate() + 2);
        		dayType = "(" + (postToday.getMonth() + 1)  + "/" + postToday.getDate() + ")";
        		postTxt = "월요일" + dayType + " 배송"
        	}else if(weekday == 5){
        		postToday.setDate(postToday.getDate() + 2);
        		dayType = "(" + (postToday.getMonth() + 1)  + "/" + postToday.getDate() + ")";
        		postTxt = "월요일" + dayType + " 배송"
        	}
        	
        	$(".view_status .post_day span").text(postTxt);
        	
        	
        })
      </script>
    <!-- 상품 리뷰 상세 E -->
    
    <!-- 각종알림(공용) S -->
    <div class="layout_wrap" id="alertPopup">
        <div class="dim"></div>
        <div class="layout_box">
            <div class="alert_wrap">
                <h3 class="layout_title">쿠폰 적용 완료되었습니다.</h3>
                <p class="auto_text">(3초후에 자동으로 사라집니다)</p>
                <a href="javascript:popClose('alertPopup');" class="alert_btn">확인</a>
            </div>
        </div>
    </div>
    <!-- 각종알림(공용) E -->
</body>
</html>